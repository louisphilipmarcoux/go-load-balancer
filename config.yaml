listenAddr: ":8443"
metricsAddr: ":9090"

tls:
  certFile: "server.crt"
  keyFile: "server.key"

rateLimit:
  enabled: true
  requestsPerSecond: 10
  burst: 20

circuitBreaker:
  enabled: true
  consecutiveFailures: 5
  openStateTimeout: "15s"

routes:
  # NEW: Route for a specific host
  - host: "api.example.com"
    path: "/"
    strategy: "round-robin"
    backends:
      - addr: "localhost:9001" # API server

  # NEW: Route for a specific header (e.g., mobile users)
  - path: "/"
    headers:
      "User-Agent": "MobileApp"
    strategy: "round-robin"
    backends:
      - addr: "localhost:9002" # Mobile-specific server

  # Default route for everyone else
  - path: "/"
    strategy: "weighted-least-connections"
    backends:
      - addr: "localhost:9003" # Main web server
